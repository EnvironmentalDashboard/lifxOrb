<!--Main page template-->

<template name="pageLayout">

    <navbar class="navbar">
        <div class="arrange">
            <div class="arrange-sizeFill arrange--middle">
                <div class="arrange-sizeFit arrange--middle">
                    <a class="navbar-bosLogo" href="https://environmentaldashboard.org/">
                        <img src="env_logo.png">
                    </a>
                </div>
            </div>
        </div>
    </navbar>

    <div id="content">
        <div class="ContainerHeader">
            <h1 class="page-header">
                Orb Settings Page
                <small>
                    Oberlin College
                </small>
            </h1>
            <hr class="subnav-hr">
        </div>

        <div class="container">
            <div class="row">
                <form class="form-horizontal form-graph" method="POST" action="" id="blockForm" style="">
                    <fieldset>
                        <div class="span6">
                            <!--Selector input-->
                            <div style="display: block;" class="control-group" id="selectorForm">
                                <label class="control-label" for="id_facility"> Selector String  </label>
                                <div class="controls">
                                    {{> selectorForm}}
                                </div>
                            </div>
                            <!--Buildings Dropdown-->
                            <div style="display: block;" class="control-group" id="facilityRow">
                                <label class="control-label" for="id_facility"> Building  </label>
                                <div class="controls">
                                    {{> facility}}
                                </div>
                            </div>
                            <!--Water Meter Dropdown-->
                            <div style="display: block;" class="control-group  " id="waterMetre">
                                <label class="control-label" for="id_meter"> Water Meter   </label>
                                <div class="controls">
                                    {{> meters}}
                                </div>
                            </div>
                            <!--Electricity Meter Dropdown-->
                            <div style="display: block;" class="control-group   " id="elecMetre">
                                <label class="control-label" for="id_meter"> Electricity Meter   </label>
                                <div class="controls">
                                    {{> meters}}
                                </div>
                            </div>
                            <!--Save Button-->
                            <div style="display: block;" class="control-group   " id="save">
                                <label class="control-label" for="id_meter">  </label>
                                <div class="controls">
                                    {{> save}}
                                </div>
                            </div>
                        </div>
                    </fieldset>
                </form>
            </div>
        </div>

        <div name="idle_state">
            <!--<div class="transparent"> buildingName <small>pointType</small></div>-->
            <!--div for water-->
            <div id="water" class="water-0" style="display: none"><img class="center" src="/waterhd.png" width="320px" height="320px"></div>
            <!--div for electricity-->
            <div id=electric class="electric-0"><img class="center" src="/finaliconelec.png" width="320px" height="320px"></div>
            <script>
                var clickDELAY = 500, switchDELAY = 20000, clicks = 0, clickTimer = null;
                idleTimer = startTimer();
                $(document).click(function(e){
                    clicks++;  //count clicks
                    if(clicks === 1) {
                        clickTimer = setTimeout(function() {
                            $("div").toggle('slow'); //perform single-click action
                            clearTimeout(idleTimer);
                            idleTimer = startTimer();
                            clicks = 0;              //after action performed, reset counter
                        }, clickDELAY);
                    } else {
                        clearTimeout(clickTimer);    //prevent single-click action
                        //alert("Double Click");     //perform double-click action (done in router)
                        clicks = 0;                  //after action performed, reset counter
                    }
                });
                function startTimer() {
                    var idleTimer = setInterval(function () {
                        // toggle the class every switchDELAY seconds
                        if ( $('#water').css('display') == 'none' ){
                            $('#electric').toggle('slow');
                            $('#water').toggle('slow');
                        } else{
                            $('#water').toggle('slow');
                            $('#electric').toggle('slow');
                        }
                    }, switchDELAY);
                    return idleTimer
                }
            </script>
        </div>
    </div>
</template>


<!--Other templates-->

<template name="selectorForm">
    <form>
        <input type="text" name="selector" id="selectorString">
    </form>
</template>

<template name="facility">
    <select name="place" id="place">
        <option value="" selected="selected"></option>
        {{#each building}}
            <option value="ale">{{this}}</option>
        {{/each}}
    </select>
</template>


<template name="meters">
    <select class="metre">
        <option value="" selected="selected"></option>
        {{#each meter}}
            <option>{{this}}</option>
        {{/each}}
    </select>
</template>

<template name="save">
    <button type="button">Save</button>
</template>


