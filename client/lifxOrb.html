<!--Main page template-->

<template name="pageLayout">

    <!--Bar at the top of the page - scrolls with you-->
    <navbar class="navbar">
        <div class="arrange">
            <div class="arrange-sizeFill arrange--middle">
                <div class="arrange-sizeFit arrange--middle">
                    <a class="navbar-bosLogo" href="https://environmentaldashboard.org/">
                        <img src="env_logo.png">
                    </a>
                </div>
            </div>
        </div>
    </navbar>

    <!--Header-->
    <div id="content">
        <div class="ContainerHeader">
            <h1 class="page-header">
                Orb Settings Page
                <small>
                    Oberlin College
                </small>
            </h1>
            <hr class="subnav-hr">
        </div>

        <!--The actual contents of the page-->
        <div class="container">
            <div class="row">
                <form class="form-horizontal form-graph" method="POST" action="" id="blockForm" style="">
                    <fieldset>
                        <div class="span6">
                            <!--Selector input-->
                            <div style="display: block;" class="control-group" id="selectorForm">
                                <label class="control-label"> Selector String  </label>
                                <div class="controls">
                                    {{> selectorForm}}
                                </div>
                            </div>
                            <!--Buildings Dropdown-->
                            <div style="display: block;" class="control-group" id="facilityRow">
                                <label class="control-label" for="id_facility"> Building  </label>
                                <div class="controls">
                                    {{> facility}}
                                </div>
                            </div>
                            <!--Water Meter Dropdown-->
                            <div style="display: block;" class="control-group  " id="waterMetre">
                                <label class="control-label" for="id_meter"> Water Meter   </label>
                                <div class="controls">
                                    {{> meters}}
                                </div>
                            </div>
                            <!--Electricity Meter Dropdown-->
                            <div style="display: block;" class="control-group   " id="elecMetre">
                                <label class="control-label" for="id_meter"> Electricity Meter   </label>
                                <div class="controls">
                                    {{> meters}}
                                </div>
                            </div>
                            <!--Save Button-->
                            <div style="display: block;" class="control-group   " id="save">
                                <label class="control-label">  </label>
                                <div class="controls">
                                    {{> save}}
                                </div>
                            </div>

                            <!-- List all made orbs-->
                            <div style="display: block;" class="control-group" id="orbList">
                                <label class="control-label"> </label>
                                <div class="controls">
                                    {{> listOrbs}}
                                </div>
                            </div>

                        </div>
                    </fieldset>
                </form>
        <!--div for orb preview-->
        <div name="idle_state" id="orb-square">
            <!--div for water-->
            <div id="water" class="orb-pic-container water-1" style="display: none"><img class="orb-pic" src="/waterhd.png" width="320px" height="320px"></div>
            <!--div for electricity-->
            <div id=electric class="orb-pic-container electric-1"><img class="orb-pic" src="/finaliconelec.png" width="320px" height="320px"></div>
            <script>
               switchDELAY = 20000, clickTimer = null;
                idleTimer = startTimer();
                function startTimer() {
                    var idleTimer = setInterval(function () {
                        // toggle the class every switchDELAY seconds
                        if ( $('#water').css('display') == 'none' ){
                            $('#electric').toggle('slow');
                            $('#water').toggle('slow');
                        } else{
                            $('#water').toggle('slow');
                            $('#electric').toggle('slow');
                        }
                    }, switchDELAY);
                    return idleTimer
                }
            </script>
        </div>
            </div>
        </div>


    </div>
</template>


<!------------------Other templates------------------>

<!--Form for selector-->
<template name="selectorForm">
    <form>
        <input type="text" name="selector" id="selectorString">
    </form>
</template>

<!--Dropdown for meters-->
<template name="facility">
    <select name="place" id="place">
        <option value="" selected="selected"></option>
        {{#each building}}
            <option value="ale">{{this}}</option>
        {{/each}}
    </select>
</template>


<template name="meters">
    <select class="metre">
        <option value="" selected="selected"></option>
        {{#each meter}}
            <option>{{this}}</option>
        {{/each}}
    </select>
</template>


<!--Buttons-->
<template name="save">
    <button type="button" id="button-save">Save</button>
</template>

<template name="remove">
    <button type="button" class="button-remove">Remove</button>
</template>

<template name="loadOrb">
    <button type="button" class="button-preview">Preview</button>
</template>

<!--Lists orbs currently in database-->
<template name="listOrbs">
    <h2>Current Orbs.</h2>
    <hr>
    <div class="all-orb-cards">
        <!-- <span id="current&#45;card&#45;placeholder">Your orb preferences will show up here. Try saving some orb settings!</span> -->
        {{#each orbs}}
        <div class="orb-action-card">
            <span class="current-orb-text">
                <b>Selector String:</b> {{selector}} <br>
                <b>Building:</b> {{building}} <br>
                <b>Water Meter:</b> {{water}} <br>
                <b>Electricity Meter:</b> {{elec}}
            </span>
            {{> remove}} {{> loadOrb}}
        </div>
        {{/each}}
    </div>
</template>
